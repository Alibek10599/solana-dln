# =============================================================================
# DLN Solana Dashboard - Environment Configuration
# =============================================================================
# Copy this file to .env and update the values
# 
#   cp .env.example .env
#
# =============================================================================

# =============================================================================
# Solana RPC Configuration
# =============================================================================

# Public endpoint (rate limited - ~40 req/s, but often less)
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com

# Recommended: Use a premium RPC provider for better rate limits
# Helius (free tier: 10 req/s, paid: 100+ req/s)
# SOLANA_RPC_URL=https://mainnet.helius-rpc.com/?api-key=YOUR_API_KEY

# QuickNode
# SOLANA_RPC_URL=https://YOUR_ENDPOINT.solana-mainnet.quiknode.pro/YOUR_TOKEN/

# =============================================================================
# ClickHouse Database
# =============================================================================

CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_DATABASE=dln_dashboard
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=

# Docker ports (only change if you have conflicts)
CLICKHOUSE_PORT=8123
CLICKHOUSE_NATIVE_PORT=9001

# =============================================================================
# API Server
# =============================================================================

API_PORT=3001
LOG_LEVEL=info

# =============================================================================
# Dashboard
# =============================================================================

DASHBOARD_PORT=3000

# =============================================================================
# Collection Settings
# =============================================================================

# Target order counts
TARGET_CREATED_ORDERS=25000
TARGET_FULFILLED_ORDERS=25000

# Run collections in parallel (true/false)
COLLECTION_PARALLEL=true

# Batch sizes
SIGNATURES_BATCH_SIZE=1000
TX_BATCH_SIZE=20

# Delay between batches (ms)
BATCH_DELAY_MS=500

# Rate limiting for simple collector (requests per second)
RATE_LIMIT_RPS=2

# =============================================================================
# Temporal Configuration
# =============================================================================

# Server address (use 'temporal:7233' in Docker, 'localhost:7233' for local dev)
TEMPORAL_ADDRESS=localhost:7233
TEMPORAL_NAMESPACE=default

# Task queues
TEMPORAL_TASK_QUEUE=dln-collector
TEMPORAL_RPC_QUEUE=dln-rpc
TEMPORAL_DB_QUEUE=dln-db

# Docker ports
TEMPORAL_PORT=7233
TEMPORAL_UI_PORT=8233

# Image versions
TEMPORAL_VERSION=1.24
TEMPORAL_UI_VERSION=2.26.2

# Temporal database (PostgreSQL)
TEMPORAL_DB_USER=temporal
TEMPORAL_DB_PASSWORD=temporal
TEMPORAL_DB_NAME=temporal

# =============================================================================
# Worker Configuration
# =============================================================================

# Worker mode: full | rpc | db | workflow
# - full: Handle all queues (default, good for development)
# - rpc: Only RPC activities (for dedicated RPC workers)
# - db: Only DB activities (for dedicated DB workers)
# - workflow: Only workflow tasks
WORKER_MODE=full

# Maximum concurrent workflow task executions
WORKER_MAX_WORKFLOW_TASKS=10

# Maximum concurrent activity executions
WORKER_MAX_ACTIVITIES=5

# Rate limit for RPC activities (per worker)
WORKER_ACTIVITIES_PER_SECOND=10

# =============================================================================
# Scaled Worker Configuration (for docker-compose --profile scaled)
# =============================================================================

# RPC Worker settings
WORKER_RPC_MAX_ACTIVITIES=3
WORKER_RPC_RATE_LIMIT=5

# DB Worker settings
WORKER_DB_MAX_ACTIVITIES=20

# =============================================================================
# Scaling Guide
# =============================================================================
#
# Development (single machine):
#   docker-compose up -d
#
# Production with scaled workers:
#   docker-compose --profile scaled up -d
#   docker-compose --profile scaled up -d --scale worker-rpc=3
#
# Recommended RPC settings by provider:
#   | Provider      | TX_BATCH_SIZE | WORKER_ACTIVITIES_PER_SECOND |
#   |---------------|---------------|------------------------------|
#   | Public RPC    | 20            | 2                            |
#   | Helius Free   | 30            | 10                           |
#   | Helius Paid   | 50            | 50                           |
#   | Premium       | 100           | 100                          |
#
# =============================================================================
